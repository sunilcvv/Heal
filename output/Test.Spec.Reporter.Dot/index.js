// Generated by purs version 0.11.6
"use strict";
var Control_Applicative = require("../Control.Applicative");
var Control_Bind = require("../Control.Bind");
var Control_Monad_Eff = require("../Control.Monad.Eff");
var Control_Monad_Eff_Console = require("../Control.Monad.Eff.Console");
var Data_Eq = require("../Data.Eq");
var Data_EuclideanRing = require("../Data.EuclideanRing");
var Data_Function = require("../Data.Function");
var Data_Functor = require("../Data.Functor");
var Data_Ring = require("../Data.Ring");
var Data_Semiring = require("../Data.Semiring");
var Prelude = require("../Prelude");
var Test_Spec_Color = require("../Test.Spec.Color");
var Test_Spec_Console = require("../Test.Spec.Console");
var Test_Spec_Reporter_Base = require("../Test.Spec.Reporter.Base");
var Test_Spec_Runner = require("../Test.Spec.Runner");
var Test_Spec_Runner_Event = require("../Test.Spec.Runner.Event");
var Test_Spec_Speed = require("../Test.Spec.Speed");
var dotReporter = function (v) {
    var update = function (n) {
        var wrap = function (action) {
            var n$prime = n + 1 | 0;
            return Data_Functor.voidRight(Control_Monad_Eff.functorEff)(n$prime)(function __do() {
                Control_Applicative.when(Control_Monad_Eff.applicativeEff)(n$prime % v.width === 0)(Test_Spec_Console.write("\x0a"))();
                return action();
            });
        };
        return function (v1) {
            if (v1 instanceof Test_Spec_Runner_Event.Pass) {
                var col = Test_Spec_Speed.toColor(v1.value1);
                return wrap(Test_Spec_Console.write(Test_Spec_Color.colored(col)(".")));
            };
            if (v1 instanceof Test_Spec_Runner_Event.Fail) {
                return wrap(Test_Spec_Console.write(Test_Spec_Color.colored(Test_Spec_Color.Fail.value)("!")));
            };
            if (v1 instanceof Test_Spec_Runner_Event.Pending) {
                return wrap(Test_Spec_Console.write(Test_Spec_Color.colored(Test_Spec_Color.Pass.value)(",")));
            };
            if (v1 instanceof Test_Spec_Runner_Event.End) {
                return Data_Functor.voidRight(Control_Monad_Eff.functorEff)(n)(Test_Spec_Console.write("\x0a"));
            };
            return Control_Applicative.pure(Control_Monad_Eff.applicativeEff)(n);
        };
    };
    return Test_Spec_Reporter_Base.defaultReporter(-1 | 0)(update);
};
module.exports = {
    dotReporter: dotReporter
};
